name: Documentation

on:
  push:
    branches: [ main ]
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Setup PHP
      uses: shivammathur/setup-php@v2
      with:
        php-version: '8.2'
        extensions: mbstring, xml, ctype, iconv, intl

    - name: Install dependencies
      run: composer install --prefer-dist --no-progress

    - name: Generate documentation
      run: echo "Documentation generation disabled due to PHPDocumentor bug" 
      # run: composer docs

    # Pages deployment temporairement désactivé
    # Raison : PHPDocumentor bug + GitHub Pages non configuré
    # Pour réactiver : 
    # 1. Activer Pages dans Settings > Pages > Source: GitHub Actions
    # 2. Décommenter les sections ci-dessous
    
    # - name: Setup Pages
    #   uses: actions/configure-pages@v4

    # - name: Upload artifact
    #   uses: actions/upload-pages-artifact@v3
    #   with:
    #     path: 'docs'

  # Job de déploiement désactivé
  # deploy:
  #   environment:
  #     name: github-pages
  #     url: ${{ steps.deployment.outputs.page_url }}
  #   runs-on: ubuntu-latest
  #   needs: build
  #   
  #   steps:
  #   - name: Deploy to GitHub Pages
  #     id: deployment
  #     uses: actions/deploy-pages@v4